function getTaskIdFromUrl(){let t=window.location.pathname.split("/");return t[t.length-1]}function getCourseIdFromUrl(){let t=window.location.pathname.split("/");return t[t.length-2]}function getCurrentPageName(){return window.location.pathname.split("/")[1]}function displayCustomTestAlertError(t){displayTaskStudentAlertWithProblems(t,"danger")}function displayTimeOutAlert(t){displayTaskStudentAlertWithProblems(t,"warning")}function displayOverflowAlert(t){displayTaskStudentAlertWithProblems(t,"danger")}function apiCustomInputRequest(t,e){let s=$("#customoutput-"+t),r="<span class='placeholder-text'>Your output goes here</span>";blurTaskForm(),resetAlerts(),s.html("Running..."),$.ajax({url:"/api/custom_input/",method:"POST",dataType:"json",data:e,processData:!1,contentType:!1,success:function(t){if(t=JSON.parse(t),s.empty(),"status"in t&&"done"===t.status){if("result"in t){let e=t.result,r=$("<span/>").addClass("stdout-text").text(t.stdout),o=$("<span/>").addClass("stderr-text").text(t.stderr);s.append(r),s.append(o),"failed"===e?displayCustomTestAlertError(t):"timeout"===e?displayTimeOutAlert(t):"overflow"===e?displayOverflowAlert(t):"success"!==e&&displayCustomTestAlertError(t)}}else"status"in t&&"error"===t.status?(s.html(r),"timeout"===t.result?(t.text="Your code did not finished. Your code TIMED OUT.",displayTimeOutAlert(t)):displayCustomTestAlertError(t)):(s.html(r),displayCustomTestAlertError({}));unblurTaskForm()},error:function(t){unblurTaskForm(),s.html(r)}})}function runCustomTest(t){let e=new FormData($("form#task")[0]);e.set("submit_action","customtest"),"course"===getCurrentPageName()?(e.set("courseid",getCourseIdFromUrl()),e.set("taskid",getTaskIdFromUrl()),apiCustomInputRequest(t,e)):"submission"===getCurrentPageName()?$.get("/api/custom_input/",{submission:getTaskIdFromUrl()},s=>{e.set("courseid",s.courseid),e.set("taskid",s.taskid),apiCustomInputRequest(t,e)}):is_lti()&&(e.set("courseid",getCourseId()),e.set("taskid",getTaskId()),apiCustomInputRequest(t,e)),$.post("/api/analytics/",{service:{key:"custom_input",name:"Custom input"},course_id:getCourseId()})}