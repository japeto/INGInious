{"ast":null,"code":"import _classCallCheck from\"/usr/lib/python3.5/site-packages/inginious/frontend/plugins/problem_bank/react_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/usr/lib/python3.5/site-packages/inginious/frontend/plugins/problem_bank/react_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/usr/lib/python3.5/site-packages/inginious/frontend/plugins/problem_bank/react_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/usr/lib/python3.5/site-packages/inginious/frontend/plugins/problem_bank/react_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/usr/lib/python3.5/site-packages/inginious/frontend/plugins/problem_bank/react_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{FormControl}from'react-bootstrap';import Task from'./task';import CustomAlert from'./custom_alert';import UltimatePagination from'./ultimate_pagination';var TaskList=/*#__PURE__*/function(_React$Component){_inherits(TaskList,_React$Component);var _super=_createSuper(TaskList);function TaskList(props){var _this;_classCallCheck(this,TaskList);_this=_super.call(this,props);_this.onChangePage=function(page){console.log(_this.state.query);if(_this.state.query===\"\"){_this.props.callbackUpdateTasks(page);}else{_this.props.callbackUpdateFilteredTasks(_this.state.query,page);}};_this.addTaskToCourse=function(courseId,taskId,bankId){_this.props.callBackAddTaskToCourse(courseId,taskId,bankId,_this.state.query);};_this.getListOfTasks=function(){var tasks=_this.props.tasks.map(function(task,i){return/*#__PURE__*/React.createElement(Task,{task_info:task,key:i,courses:_this.props.courses,callBackAddTaskToCourse:_this.addTaskToCourse});});if(!tasks.length){tasks=\"There are no tasks available.\";}return tasks;};_this.state={query:'',timer:0};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this;}_createClass(TaskList,[{key:\"handleChange\",value:function handleChange(e){var newStateQuery=e.target.value;var updateFilteredTasks=this.props.callbackUpdateFilteredTasks;clearTimeout(this.state.timer);if(newStateQuery===\"\"){this.props.callbackUpdateTasks();this.setState({query:newStateQuery,timer:0});}else{this.setState({query:newStateQuery,timer:setTimeout(function(){return updateFilteredTasks(newStateQuery);},500)});}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(CustomAlert,{message:this.props.dataAlert.data.message,isVisible:this.props.dataAlert.isVisibleAlert,callbackParent:this.props.callbackOnChildChangedClose,styleAlert:this.props.dataAlert.styleAlert,titleAlert:this.props.dataAlert.titleAlert,callbackSetAlertInvisible:this.props.callbackSetAlertInvisible}),/*#__PURE__*/React.createElement(\"form\",{className:\"custom-search-input\"},/*#__PURE__*/React.createElement(\"h5\",null,\"Search tasks:\"),/*#__PURE__*/React.createElement(FormControl,{type:\"text\",value:this.props.query,placeholder:\"Type a course id or name, task name or a tag\",onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"div\",null,\"The following tasks are available for copying:\"),/*#__PURE__*/React.createElement(\"div\",{className:\"list-group\"},this.getListOfTasks()),/*#__PURE__*/React.createElement(UltimatePagination,{currentPage:this.props.page,totalPages:this.props.totalPages,onChange:this.onChangePage}));}}]);return TaskList;}(React.Component);export default TaskList;","map":{"version":3,"sources":["/usr/lib/python3.5/site-packages/inginious/frontend/plugins/problem_bank/react_app/src/task_list.jsx"],"names":["React","FormControl","Task","CustomAlert","UltimatePagination","TaskList","props","onChangePage","page","console","log","state","query","callbackUpdateTasks","callbackUpdateFilteredTasks","addTaskToCourse","courseId","taskId","bankId","callBackAddTaskToCourse","getListOfTasks","tasks","map","task","i","courses","length","timer","handleChange","bind","e","newStateQuery","target","value","updateFilteredTasks","clearTimeout","setState","setTimeout","dataAlert","data","message","isVisibleAlert","callbackOnChildChangedClose","styleAlert","titleAlert","callbackSetAlertInvisible","totalPages","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {FormControl} from 'react-bootstrap';\nimport Task from './task';\nimport CustomAlert from './custom_alert';\nimport UltimatePagination from './ultimate_pagination';\n\nclass TaskList extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            query: '',\n            timer: 0,\n        };\n\n        this.handleChange = this.handleChange.bind(this);\n    }\n\n    handleChange(e) {\n        const newStateQuery = e.target.value;\n        const updateFilteredTasks = this.props.callbackUpdateFilteredTasks;\n\n        clearTimeout(this.state.timer);\n        if (newStateQuery === \"\") {\n            this.props.callbackUpdateTasks();\n            this.setState({\n                query: newStateQuery,\n                timer: 0\n            });\n        } else {\n            this.setState({\n                query: newStateQuery,\n                timer: setTimeout(() => updateFilteredTasks(newStateQuery), 500)\n            });\n        }\n    };\n\n    onChangePage = (page) => {\n        console.log(this.state.query);\n        if (this.state.query === \"\") {\n            this.props.callbackUpdateTasks(page);\n        } else {\n            this.props.callbackUpdateFilteredTasks(this.state.query, page);\n        }\n    };\n\n    addTaskToCourse = (courseId, taskId, bankId) => {\n        this.props.callBackAddTaskToCourse(courseId, taskId, bankId, this.state.query);\n    };\n\n    getListOfTasks = () => {\n        let tasks = this.props.tasks.map((task, i) => {\n            return (<Task\n                task_info={task}\n                key={i}\n                courses={this.props.courses}\n                callBackAddTaskToCourse={this.addTaskToCourse}\n            />)\n        });\n\n        if (!tasks.length) {\n            tasks = \"There are no tasks available.\";\n        }\n        return tasks\n    };\n\n    render() {\n\n        return (\n            <div>\n                <CustomAlert message={this.props.dataAlert.data.message}\n                             isVisible={this.props.dataAlert.isVisibleAlert}\n                             callbackParent={this.props.callbackOnChildChangedClose}\n                             styleAlert={this.props.dataAlert.styleAlert}\n                             titleAlert={this.props.dataAlert.titleAlert}\n                             callbackSetAlertInvisible={this.props.callbackSetAlertInvisible}\n                />\n\n                <form className=\"custom-search-input\">\n                    <h5>Search tasks:</h5>\n                    <FormControl\n                        type=\"text\"\n                        value={this.props.query}\n                        placeholder=\"Type a course id or name, task name or a tag\"\n                        onChange={this.handleChange}\n                    />\n                </form>\n\n                <div>The following tasks are available for copying:</div>\n\n                <div className=\"list-group\">{this.getListOfTasks()}</div>\n\n                <UltimatePagination\n                    currentPage={this.props.page}\n                    totalPages={this.props.totalPages}\n                    onChange={this.onChangePage}\n                />\n\n            </div>\n        );\n    }\n}\n\nexport default TaskList;"]},"metadata":{},"sourceType":"module"}