{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _arrays = require('shallow-equal/arrays');\n\nvar _arrays2 = _interopRequireDefault(_arrays);\n\nvar _reactAutowhatever = require('react-autowhatever');\n\nvar _reactAutowhatever2 = _interopRequireDefault(_reactAutowhatever);\n\nvar _theme = require('./theme');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar alwaysTrue = function alwaysTrue() {\n  return true;\n};\n\nvar defaultShouldRenderSuggestions = function defaultShouldRenderSuggestions(value) {\n  return value.trim().length > 0;\n};\n\nvar defaultRenderSuggestionsContainer = function defaultRenderSuggestionsContainer(_ref) {\n  var containerProps = _ref.containerProps,\n      children = _ref.children;\n  return _react2.default.createElement('div', containerProps, children);\n};\n\nvar Autosuggest = function (_Component) {\n  _inherits(Autosuggest, _Component);\n\n  function Autosuggest(_ref2) {\n    var alwaysRenderSuggestions = _ref2.alwaysRenderSuggestions;\n\n    _classCallCheck(this, Autosuggest);\n\n    var _this = _possibleConstructorReturn(this, (Autosuggest.__proto__ || Object.getPrototypeOf(Autosuggest)).call(this));\n\n    _initialiseProps.call(_this);\n\n    _this.state = {\n      isFocused: false,\n      isCollapsed: !alwaysRenderSuggestions,\n      highlightedSectionIndex: null,\n      highlightedSuggestionIndex: null,\n      valueBeforeUpDown: null\n    };\n    _this.justPressedUpDown = false;\n    return _this;\n  }\n\n  _createClass(Autosuggest, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      document.addEventListener('mousedown', this.onDocumentMouseDown);\n      this.input = this.autowhatever.input;\n      this.suggestionsContainer = this.autowhatever.itemsContainer;\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if ((0, _arrays2.default)(nextProps.suggestions, this.props.suggestions)) {\n        if (nextProps.highlightFirstSuggestion && nextProps.suggestions.length > 0 && this.justPressedUpDown === false) {\n          this.highlightFirstSuggestion();\n        }\n      } else {\n        if (this.willRenderSuggestions(nextProps)) {\n          if (nextProps.highlightFirstSuggestion) {\n            this.highlightFirstSuggestion();\n          }\n\n          if (this.state.isCollapsed && !this.justSelectedSuggestion) {\n            this.revealSuggestions();\n          }\n        } else {\n          this.resetHighlightedSuggestion();\n        }\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps, prevState) {\n      var onSuggestionHighlighted = this.props.onSuggestionHighlighted;\n\n      if (!onSuggestionHighlighted) {\n        return;\n      }\n\n      var _state = this.state,\n          highlightedSectionIndex = _state.highlightedSectionIndex,\n          highlightedSuggestionIndex = _state.highlightedSuggestionIndex;\n\n      if (highlightedSectionIndex !== prevState.highlightedSectionIndex || highlightedSuggestionIndex !== prevState.highlightedSuggestionIndex) {\n        var suggestion = this.getHighlightedSuggestion();\n        onSuggestionHighlighted({\n          suggestion: suggestion\n        });\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      document.removeEventListener('mousedown', this.onDocumentMouseDown);\n    }\n  }, {\n    key: 'updateHighlightedSuggestion',\n    value: function updateHighlightedSuggestion(sectionIndex, suggestionIndex, prevValue) {\n      this.setState(function (state) {\n        var valueBeforeUpDown = state.valueBeforeUpDown;\n\n        if (suggestionIndex === null) {\n          valueBeforeUpDown = null;\n        } else if (valueBeforeUpDown === null && typeof prevValue !== 'undefined') {\n          valueBeforeUpDown = prevValue;\n        }\n\n        return {\n          highlightedSectionIndex: sectionIndex,\n          highlightedSuggestionIndex: suggestionIndex,\n          valueBeforeUpDown: valueBeforeUpDown\n        };\n      });\n    }\n  }, {\n    key: 'resetHighlightedSuggestion',\n    value: function resetHighlightedSuggestion() {\n      var shouldResetValueBeforeUpDown = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      this.setState(function (state) {\n        var valueBeforeUpDown = state.valueBeforeUpDown;\n        return {\n          highlightedSectionIndex: null,\n          highlightedSuggestionIndex: null,\n          valueBeforeUpDown: shouldResetValueBeforeUpDown ? null : valueBeforeUpDown\n        };\n      });\n    }\n  }, {\n    key: 'revealSuggestions',\n    value: function revealSuggestions() {\n      this.setState({\n        isCollapsed: false\n      });\n    }\n  }, {\n    key: 'closeSuggestions',\n    value: function closeSuggestions() {\n      this.setState({\n        highlightedSectionIndex: null,\n        highlightedSuggestionIndex: null,\n        valueBeforeUpDown: null,\n        isCollapsed: true\n      });\n    }\n  }, {\n    key: 'getSuggestion',\n    value: function getSuggestion(sectionIndex, suggestionIndex) {\n      var _props = this.props,\n          suggestions = _props.suggestions,\n          multiSection = _props.multiSection,\n          getSectionSuggestions = _props.getSectionSuggestions;\n\n      if (multiSection) {\n        return getSectionSuggestions(suggestions[sectionIndex])[suggestionIndex];\n      }\n\n      return suggestions[suggestionIndex];\n    }\n  }, {\n    key: 'getHighlightedSuggestion',\n    value: function getHighlightedSuggestion() {\n      var _state2 = this.state,\n          highlightedSectionIndex = _state2.highlightedSectionIndex,\n          highlightedSuggestionIndex = _state2.highlightedSuggestionIndex;\n\n      if (highlightedSuggestionIndex === null) {\n        return null;\n      }\n\n      return this.getSuggestion(highlightedSectionIndex, highlightedSuggestionIndex);\n    }\n  }, {\n    key: 'getSuggestionValueByIndex',\n    value: function getSuggestionValueByIndex(sectionIndex, suggestionIndex) {\n      var getSuggestionValue = this.props.getSuggestionValue;\n      return getSuggestionValue(this.getSuggestion(sectionIndex, suggestionIndex));\n    }\n  }, {\n    key: 'getSuggestionIndices',\n    value: function getSuggestionIndices(suggestionElement) {\n      var sectionIndex = suggestionElement.getAttribute('data-section-index');\n      var suggestionIndex = suggestionElement.getAttribute('data-suggestion-index');\n      return {\n        sectionIndex: typeof sectionIndex === 'string' ? parseInt(sectionIndex, 10) : null,\n        suggestionIndex: parseInt(suggestionIndex, 10)\n      };\n    }\n  }, {\n    key: 'findSuggestionElement',\n    value: function findSuggestionElement(startNode) {\n      var node = startNode;\n\n      do {\n        if (node.getAttribute('data-suggestion-index') !== null) {\n          return node;\n        }\n\n        node = node.parentNode;\n      } while (node !== null);\n\n      console.error('Clicked element:', startNode); // eslint-disable-line no-console\n\n      throw new Error(\"Couldn't find suggestion element\");\n    }\n  }, {\n    key: 'maybeCallOnChange',\n    value: function maybeCallOnChange(event, newValue, method) {\n      var _props$inputProps = this.props.inputProps,\n          value = _props$inputProps.value,\n          onChange = _props$inputProps.onChange;\n\n      if (newValue !== value) {\n        onChange(event, {\n          newValue: newValue,\n          method: method\n        });\n      }\n    }\n  }, {\n    key: 'willRenderSuggestions',\n    value: function willRenderSuggestions(props) {\n      var suggestions = props.suggestions,\n          inputProps = props.inputProps,\n          shouldRenderSuggestions = props.shouldRenderSuggestions;\n      var value = inputProps.value;\n      return suggestions.length > 0 && shouldRenderSuggestions(value);\n    }\n  }, {\n    key: 'getQuery',\n    value: function getQuery() {\n      var inputProps = this.props.inputProps;\n      var value = inputProps.value;\n      var valueBeforeUpDown = this.state.valueBeforeUpDown;\n      return (valueBeforeUpDown || value).trim();\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props2 = this.props,\n          suggestions = _props2.suggestions,\n          renderInputComponent = _props2.renderInputComponent,\n          onSuggestionsFetchRequested = _props2.onSuggestionsFetchRequested,\n          renderSuggestion = _props2.renderSuggestion,\n          inputProps = _props2.inputProps,\n          multiSection = _props2.multiSection,\n          renderSectionTitle = _props2.renderSectionTitle,\n          id = _props2.id,\n          getSectionSuggestions = _props2.getSectionSuggestions,\n          theme = _props2.theme,\n          getSuggestionValue = _props2.getSuggestionValue,\n          alwaysRenderSuggestions = _props2.alwaysRenderSuggestions;\n      var _state3 = this.state,\n          isFocused = _state3.isFocused,\n          isCollapsed = _state3.isCollapsed,\n          highlightedSectionIndex = _state3.highlightedSectionIndex,\n          highlightedSuggestionIndex = _state3.highlightedSuggestionIndex,\n          valueBeforeUpDown = _state3.valueBeforeUpDown;\n      var shouldRenderSuggestions = alwaysRenderSuggestions ? alwaysTrue : this.props.shouldRenderSuggestions;\n      var value = inputProps.value,\n          _onFocus = inputProps.onFocus,\n          _onKeyDown = inputProps.onKeyDown;\n      var willRenderSuggestions = this.willRenderSuggestions(this.props);\n      var isOpen = alwaysRenderSuggestions || isFocused && !isCollapsed && willRenderSuggestions;\n      var items = isOpen ? suggestions : [];\n\n      var autowhateverInputProps = _extends({}, inputProps, {\n        onFocus: function onFocus(event) {\n          if (!_this2.justSelectedSuggestion && !_this2.justClickedOnSuggestionsContainer) {\n            var shouldRender = shouldRenderSuggestions(value);\n\n            _this2.setState({\n              isFocused: true,\n              isCollapsed: !shouldRender\n            });\n\n            _onFocus && _onFocus(event);\n\n            if (shouldRender) {\n              onSuggestionsFetchRequested({\n                value: value,\n                reason: 'input-focused'\n              });\n            }\n          }\n        },\n        onBlur: function onBlur(event) {\n          if (_this2.justClickedOnSuggestionsContainer) {\n            _this2.input.focus();\n\n            return;\n          }\n\n          _this2.blurEvent = event;\n\n          if (!_this2.justSelectedSuggestion) {\n            _this2.onBlur();\n\n            _this2.onSuggestionsClearRequested();\n          }\n        },\n        onChange: function onChange(event) {\n          var value = event.target.value;\n          var shouldRender = shouldRenderSuggestions(value);\n\n          _this2.maybeCallOnChange(event, value, 'type');\n\n          _this2.setState({\n            highlightedSectionIndex: null,\n            highlightedSuggestionIndex: null,\n            valueBeforeUpDown: null,\n            isCollapsed: !shouldRender\n          });\n\n          if (shouldRender) {\n            onSuggestionsFetchRequested({\n              value: value,\n              reason: 'input-changed'\n            });\n          } else {\n            _this2.onSuggestionsClearRequested();\n          }\n        },\n        onKeyDown: function onKeyDown(event, data) {\n          var keyCode = event.keyCode;\n\n          switch (keyCode) {\n            case 40: // ArrowDown\n\n            case 38:\n              // ArrowUp\n              if (isCollapsed) {\n                if (shouldRenderSuggestions(value)) {\n                  onSuggestionsFetchRequested({\n                    value: value,\n                    reason: 'suggestions-revealed'\n                  });\n\n                  _this2.revealSuggestions();\n                }\n              } else if (suggestions.length > 0) {\n                var newHighlightedSectionIndex = data.newHighlightedSectionIndex,\n                    newHighlightedItemIndex = data.newHighlightedItemIndex;\n                var newValue = void 0;\n\n                if (newHighlightedItemIndex === null) {\n                  // valueBeforeUpDown can be null if, for example, user\n                  // hovers on the first suggestion and then pressed Up.\n                  // If that happens, use the original input value.\n                  newValue = valueBeforeUpDown === null ? value : valueBeforeUpDown;\n                } else {\n                  newValue = _this2.getSuggestionValueByIndex(newHighlightedSectionIndex, newHighlightedItemIndex);\n                }\n\n                _this2.updateHighlightedSuggestion(newHighlightedSectionIndex, newHighlightedItemIndex, value);\n\n                _this2.maybeCallOnChange(event, newValue, keyCode === 40 ? 'down' : 'up');\n              }\n\n              event.preventDefault(); // Prevents the cursor from moving\n\n              _this2.justPressedUpDown = true;\n              setTimeout(function () {\n                _this2.justPressedUpDown = false;\n              });\n              break;\n            // Enter\n\n            case 13:\n              {\n                // See #388\n                if (event.keyCode === 229) {\n                  break;\n                }\n\n                var highlightedSuggestion = _this2.getHighlightedSuggestion();\n\n                if (isOpen && !alwaysRenderSuggestions) {\n                  _this2.closeSuggestions();\n                }\n\n                if (highlightedSuggestion !== null) {\n                  var _newValue = getSuggestionValue(highlightedSuggestion);\n\n                  _this2.maybeCallOnChange(event, _newValue, 'enter');\n\n                  _this2.onSuggestionSelected(event, {\n                    suggestion: highlightedSuggestion,\n                    suggestionValue: _newValue,\n                    suggestionIndex: highlightedSuggestionIndex,\n                    sectionIndex: highlightedSectionIndex,\n                    method: 'enter'\n                  });\n\n                  _this2.justSelectedSuggestion = true;\n                  setTimeout(function () {\n                    _this2.justSelectedSuggestion = false;\n                  });\n                }\n\n                break;\n              }\n            // Escape\n\n            case 27:\n              {\n                if (isOpen) {\n                  // If input.type === 'search', the browser clears the input\n                  // when Escape is pressed. We want to disable this default\n                  // behaviour so that, when suggestions are shown, we just hide\n                  // them, without clearing the input.\n                  event.preventDefault();\n                }\n\n                var willCloseSuggestions = isOpen && !alwaysRenderSuggestions;\n\n                if (valueBeforeUpDown === null) {\n                  // Didn't interact with Up/Down\n                  if (!willCloseSuggestions) {\n                    var _newValue2 = '';\n\n                    _this2.maybeCallOnChange(event, _newValue2, 'escape');\n\n                    if (shouldRenderSuggestions(_newValue2)) {\n                      onSuggestionsFetchRequested({\n                        value: _newValue2,\n                        reason: 'escape-pressed'\n                      });\n                    } else {\n                      _this2.onSuggestionsClearRequested();\n                    }\n                  }\n                } else {\n                  // Interacted with Up/Down\n                  _this2.maybeCallOnChange(event, valueBeforeUpDown, 'escape');\n                }\n\n                if (willCloseSuggestions) {\n                  _this2.onSuggestionsClearRequested();\n\n                  _this2.closeSuggestions();\n                } else {\n                  _this2.resetHighlightedSuggestion();\n                }\n\n                break;\n              }\n          }\n\n          _onKeyDown && _onKeyDown(event);\n        }\n      });\n\n      var renderSuggestionData = {\n        query: this.getQuery()\n      };\n      return _react2.default.createElement(_reactAutowhatever2.default, {\n        multiSection: multiSection,\n        items: items,\n        renderInputComponent: renderInputComponent,\n        renderItemsContainer: this.renderSuggestionsContainer,\n        renderItem: renderSuggestion,\n        renderItemData: renderSuggestionData,\n        renderSectionTitle: renderSectionTitle,\n        getSectionItems: getSectionSuggestions,\n        highlightedSectionIndex: highlightedSectionIndex,\n        highlightedItemIndex: highlightedSuggestionIndex,\n        inputProps: autowhateverInputProps,\n        itemProps: this.itemProps,\n        theme: (0, _theme.mapToAutowhateverTheme)(theme),\n        id: id,\n        ref: this.storeAutowhateverRef\n      });\n    }\n  }]);\n\n  return Autosuggest;\n}(_react.Component);\n\nAutosuggest.propTypes = {\n  suggestions: _propTypes2.default.array.isRequired,\n  onSuggestionsFetchRequested: function onSuggestionsFetchRequested(props, propName) {\n    var onSuggestionsFetchRequested = props[propName];\n\n    if (typeof onSuggestionsFetchRequested !== 'function') {\n      throw new Error(\"'onSuggestionsFetchRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsFetchRequestedProp\");\n    }\n  },\n  onSuggestionsClearRequested: function onSuggestionsClearRequested(props, propName) {\n    var onSuggestionsClearRequested = props[propName];\n\n    if (props.alwaysRenderSuggestions === false && typeof onSuggestionsClearRequested !== 'function') {\n      throw new Error(\"'onSuggestionsClearRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsClearRequestedProp\");\n    }\n  },\n  onSuggestionSelected: _propTypes2.default.func,\n  onSuggestionHighlighted: _propTypes2.default.func,\n  renderInputComponent: _propTypes2.default.func,\n  renderSuggestionsContainer: _propTypes2.default.func,\n  getSuggestionValue: _propTypes2.default.func.isRequired,\n  renderSuggestion: _propTypes2.default.func.isRequired,\n  inputProps: function inputProps(props, propName) {\n    var inputProps = props[propName];\n\n    if (!inputProps.hasOwnProperty('value')) {\n      throw new Error(\"'inputProps' must have 'value'.\");\n    }\n\n    if (!inputProps.hasOwnProperty('onChange')) {\n      throw new Error(\"'inputProps' must have 'onChange'.\");\n    }\n  },\n  shouldRenderSuggestions: _propTypes2.default.func,\n  alwaysRenderSuggestions: _propTypes2.default.bool,\n  multiSection: _propTypes2.default.bool,\n  renderSectionTitle: function renderSectionTitle(props, propName) {\n    var renderSectionTitle = props[propName];\n\n    if (props.multiSection === true && typeof renderSectionTitle !== 'function') {\n      throw new Error(\"'renderSectionTitle' must be implemented. See: https://github.com/moroshko/react-autosuggest#renderSectionTitleProp\");\n    }\n  },\n  getSectionSuggestions: function getSectionSuggestions(props, propName) {\n    var getSectionSuggestions = props[propName];\n\n    if (props.multiSection === true && typeof getSectionSuggestions !== 'function') {\n      throw new Error(\"'getSectionSuggestions' must be implemented. See: https://github.com/moroshko/react-autosuggest#getSectionSuggestionsProp\");\n    }\n  },\n  focusInputOnSuggestionClick: _propTypes2.default.bool,\n  highlightFirstSuggestion: _propTypes2.default.bool,\n  theme: _propTypes2.default.object,\n  id: _propTypes2.default.string\n};\nAutosuggest.defaultProps = {\n  renderSuggestionsContainer: defaultRenderSuggestionsContainer,\n  shouldRenderSuggestions: defaultShouldRenderSuggestions,\n  alwaysRenderSuggestions: false,\n  multiSection: false,\n  focusInputOnSuggestionClick: true,\n  highlightFirstSuggestion: false,\n  theme: _theme.defaultTheme,\n  id: '1'\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.onDocumentMouseDown = function (event) {\n    _this3.justClickedOnSuggestionsContainer = false;\n    var node = event.detail && event.detail.target || // This is for testing only. Please show me a better way to emulate this.\n    event.target;\n\n    while (node !== null && node !== document) {\n      if (node.getAttribute('data-suggestion-index') !== null) {\n        // Suggestion was clicked\n        return;\n      }\n\n      if (node === _this3.suggestionsContainer) {\n        // Something else inside suggestions container was clicked\n        _this3.justClickedOnSuggestionsContainer = true;\n        return;\n      }\n\n      node = node.parentNode;\n    }\n  };\n\n  this.storeAutowhateverRef = function (autowhatever) {\n    if (autowhatever !== null) {\n      _this3.autowhatever = autowhatever;\n    }\n  };\n\n  this.onSuggestionMouseEnter = function (event, _ref3) {\n    var sectionIndex = _ref3.sectionIndex,\n        itemIndex = _ref3.itemIndex;\n\n    _this3.updateHighlightedSuggestion(sectionIndex, itemIndex);\n  };\n\n  this.highlightFirstSuggestion = function () {\n    _this3.updateHighlightedSuggestion(_this3.props.multiSection ? 0 : null, 0);\n  };\n\n  this.onSuggestionMouseDown = function () {\n    _this3.justSelectedSuggestion = true;\n  };\n\n  this.onSuggestionsClearRequested = function () {\n    var onSuggestionsClearRequested = _this3.props.onSuggestionsClearRequested;\n    onSuggestionsClearRequested && onSuggestionsClearRequested();\n  };\n\n  this.onSuggestionSelected = function (event, data) {\n    var _props3 = _this3.props,\n        alwaysRenderSuggestions = _props3.alwaysRenderSuggestions,\n        onSuggestionSelected = _props3.onSuggestionSelected,\n        onSuggestionsFetchRequested = _props3.onSuggestionsFetchRequested;\n    onSuggestionSelected && onSuggestionSelected(event, data);\n\n    if (alwaysRenderSuggestions) {\n      onSuggestionsFetchRequested({\n        value: data.suggestionValue,\n        reason: 'suggestion-selected'\n      });\n    } else {\n      _this3.onSuggestionsClearRequested();\n    }\n\n    _this3.resetHighlightedSuggestion();\n  };\n\n  this.onSuggestionClick = function (event) {\n    var _props4 = _this3.props,\n        alwaysRenderSuggestions = _props4.alwaysRenderSuggestions,\n        focusInputOnSuggestionClick = _props4.focusInputOnSuggestionClick;\n\n    var _getSuggestionIndices = _this3.getSuggestionIndices(_this3.findSuggestionElement(event.target)),\n        sectionIndex = _getSuggestionIndices.sectionIndex,\n        suggestionIndex = _getSuggestionIndices.suggestionIndex;\n\n    var clickedSuggestion = _this3.getSuggestion(sectionIndex, suggestionIndex);\n\n    var clickedSuggestionValue = _this3.props.getSuggestionValue(clickedSuggestion);\n\n    _this3.maybeCallOnChange(event, clickedSuggestionValue, 'click');\n\n    _this3.onSuggestionSelected(event, {\n      suggestion: clickedSuggestion,\n      suggestionValue: clickedSuggestionValue,\n      suggestionIndex: suggestionIndex,\n      sectionIndex: sectionIndex,\n      method: 'click'\n    });\n\n    if (!alwaysRenderSuggestions) {\n      _this3.closeSuggestions();\n    }\n\n    if (focusInputOnSuggestionClick === true) {\n      _this3.input.focus();\n    } else {\n      _this3.onBlur();\n    }\n\n    setTimeout(function () {\n      _this3.justSelectedSuggestion = false;\n    });\n  };\n\n  this.onBlur = function () {\n    var _props5 = _this3.props,\n        inputProps = _props5.inputProps,\n        shouldRenderSuggestions = _props5.shouldRenderSuggestions;\n    var value = inputProps.value,\n        onBlur = inputProps.onBlur;\n\n    var highlightedSuggestion = _this3.getHighlightedSuggestion();\n\n    var shouldRender = shouldRenderSuggestions(value);\n\n    _this3.setState({\n      isFocused: false,\n      highlightedSectionIndex: null,\n      highlightedSuggestionIndex: null,\n      valueBeforeUpDown: null,\n      isCollapsed: !shouldRender\n    });\n\n    onBlur && onBlur(_this3.blurEvent, {\n      highlightedSuggestion: highlightedSuggestion\n    });\n  };\n\n  this.resetHighlightedSuggestionOnMouseLeave = function () {\n    _this3.resetHighlightedSuggestion(false); // shouldResetValueBeforeUpDown\n\n  };\n\n  this.itemProps = function (_ref4) {\n    var sectionIndex = _ref4.sectionIndex,\n        itemIndex = _ref4.itemIndex;\n    return {\n      'data-section-index': sectionIndex,\n      'data-suggestion-index': itemIndex,\n      onMouseEnter: _this3.onSuggestionMouseEnter,\n      onMouseLeave: _this3.resetHighlightedSuggestionOnMouseLeave,\n      onMouseDown: _this3.onSuggestionMouseDown,\n      onTouchStart: _this3.onSuggestionMouseDown,\n      // Because on iOS `onMouseDown` is not triggered\n      onClick: _this3.onSuggestionClick\n    };\n  };\n\n  this.renderSuggestionsContainer = function (_ref5) {\n    var containerProps = _ref5.containerProps,\n        children = _ref5.children;\n    var renderSuggestionsContainer = _this3.props.renderSuggestionsContainer;\n    return renderSuggestionsContainer({\n      containerProps: containerProps,\n      children: children,\n      query: _this3.getQuery()\n    });\n  };\n};\n\nexports.default = Autosuggest;","map":{"version":3,"sources":["/usr/lib/python3.5/site-packages/inginious/frontend/plugins/problem_bank/react_app/node_modules/react-autosuggest/dist/Autosuggest.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","_arrays","_arrays2","_reactAutowhatever","_reactAutowhatever2","_theme","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","alwaysTrue","defaultShouldRenderSuggestions","trim","defaultRenderSuggestionsContainer","_ref","containerProps","children","createElement","Autosuggest","_Component","_ref2","alwaysRenderSuggestions","_this","getPrototypeOf","_initialiseProps","state","isFocused","isCollapsed","highlightedSectionIndex","highlightedSuggestionIndex","valueBeforeUpDown","justPressedUpDown","componentDidMount","document","addEventListener","onDocumentMouseDown","input","autowhatever","suggestionsContainer","itemsContainer","componentWillReceiveProps","nextProps","suggestions","highlightFirstSuggestion","willRenderSuggestions","justSelectedSuggestion","revealSuggestions","resetHighlightedSuggestion","componentDidUpdate","prevProps","prevState","onSuggestionHighlighted","_state","suggestion","getHighlightedSuggestion","componentWillUnmount","removeEventListener","updateHighlightedSuggestion","sectionIndex","suggestionIndex","prevValue","setState","shouldResetValueBeforeUpDown","undefined","closeSuggestions","getSuggestion","_props","multiSection","getSectionSuggestions","_state2","getSuggestionValueByIndex","getSuggestionValue","getSuggestionIndices","suggestionElement","getAttribute","parseInt","findSuggestionElement","startNode","node","parentNode","console","error","Error","maybeCallOnChange","event","newValue","method","_props$inputProps","inputProps","onChange","shouldRenderSuggestions","getQuery","render","_this2","_props2","renderInputComponent","onSuggestionsFetchRequested","renderSuggestion","renderSectionTitle","id","theme","_state3","_onFocus","onFocus","_onKeyDown","onKeyDown","isOpen","items","autowhateverInputProps","justClickedOnSuggestionsContainer","shouldRender","reason","onBlur","focus","blurEvent","onSuggestionsClearRequested","data","keyCode","newHighlightedSectionIndex","newHighlightedItemIndex","preventDefault","setTimeout","highlightedSuggestion","_newValue","onSuggestionSelected","suggestionValue","willCloseSuggestions","_newValue2","renderSuggestionData","query","renderItemsContainer","renderSuggestionsContainer","renderItem","renderItemData","getSectionItems","highlightedItemIndex","itemProps","mapToAutowhateverTheme","ref","storeAutowhateverRef","Component","propTypes","array","isRequired","propName","func","bool","focusInputOnSuggestionClick","object","string","defaultProps","defaultTheme","_this3","detail","onSuggestionMouseEnter","_ref3","itemIndex","onSuggestionMouseDown","_props3","onSuggestionClick","_props4","_getSuggestionIndices","clickedSuggestion","clickedSuggestionValue","_props5","resetHighlightedSuggestionOnMouseLeave","_ref4","onMouseEnter","onMouseLeave","onMouseDown","onTouchStart","onClick","_ref5"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _arrays = require('shallow-equal/arrays');\n\nvar _arrays2 = _interopRequireDefault(_arrays);\n\nvar _reactAutowhatever = require('react-autowhatever');\n\nvar _reactAutowhatever2 = _interopRequireDefault(_reactAutowhatever);\n\nvar _theme = require('./theme');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar alwaysTrue = function alwaysTrue() {\n  return true;\n};\nvar defaultShouldRenderSuggestions = function defaultShouldRenderSuggestions(value) {\n  return value.trim().length > 0;\n};\nvar defaultRenderSuggestionsContainer = function defaultRenderSuggestionsContainer(_ref) {\n  var containerProps = _ref.containerProps,\n      children = _ref.children;\n  return _react2.default.createElement(\n    'div',\n    containerProps,\n    children\n  );\n};\n\nvar Autosuggest = function (_Component) {\n  _inherits(Autosuggest, _Component);\n\n  function Autosuggest(_ref2) {\n    var alwaysRenderSuggestions = _ref2.alwaysRenderSuggestions;\n\n    _classCallCheck(this, Autosuggest);\n\n    var _this = _possibleConstructorReturn(this, (Autosuggest.__proto__ || Object.getPrototypeOf(Autosuggest)).call(this));\n\n    _initialiseProps.call(_this);\n\n    _this.state = {\n      isFocused: false,\n      isCollapsed: !alwaysRenderSuggestions,\n      highlightedSectionIndex: null,\n      highlightedSuggestionIndex: null,\n      valueBeforeUpDown: null\n    };\n\n    _this.justPressedUpDown = false;\n    return _this;\n  }\n\n  _createClass(Autosuggest, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      document.addEventListener('mousedown', this.onDocumentMouseDown);\n\n      this.input = this.autowhatever.input;\n      this.suggestionsContainer = this.autowhatever.itemsContainer;\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if ((0, _arrays2.default)(nextProps.suggestions, this.props.suggestions)) {\n        if (nextProps.highlightFirstSuggestion && nextProps.suggestions.length > 0 && this.justPressedUpDown === false) {\n          this.highlightFirstSuggestion();\n        }\n      } else {\n        if (this.willRenderSuggestions(nextProps)) {\n          if (nextProps.highlightFirstSuggestion) {\n            this.highlightFirstSuggestion();\n          }\n\n          if (this.state.isCollapsed && !this.justSelectedSuggestion) {\n            this.revealSuggestions();\n          }\n        } else {\n          this.resetHighlightedSuggestion();\n        }\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps, prevState) {\n      var onSuggestionHighlighted = this.props.onSuggestionHighlighted;\n\n\n      if (!onSuggestionHighlighted) {\n        return;\n      }\n\n      var _state = this.state,\n          highlightedSectionIndex = _state.highlightedSectionIndex,\n          highlightedSuggestionIndex = _state.highlightedSuggestionIndex;\n\n\n      if (highlightedSectionIndex !== prevState.highlightedSectionIndex || highlightedSuggestionIndex !== prevState.highlightedSuggestionIndex) {\n        var suggestion = this.getHighlightedSuggestion();\n\n        onSuggestionHighlighted({ suggestion: suggestion });\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      document.removeEventListener('mousedown', this.onDocumentMouseDown);\n    }\n  }, {\n    key: 'updateHighlightedSuggestion',\n    value: function updateHighlightedSuggestion(sectionIndex, suggestionIndex, prevValue) {\n      this.setState(function (state) {\n        var valueBeforeUpDown = state.valueBeforeUpDown;\n\n\n        if (suggestionIndex === null) {\n          valueBeforeUpDown = null;\n        } else if (valueBeforeUpDown === null && typeof prevValue !== 'undefined') {\n          valueBeforeUpDown = prevValue;\n        }\n\n        return {\n          highlightedSectionIndex: sectionIndex,\n          highlightedSuggestionIndex: suggestionIndex,\n          valueBeforeUpDown: valueBeforeUpDown\n        };\n      });\n    }\n  }, {\n    key: 'resetHighlightedSuggestion',\n    value: function resetHighlightedSuggestion() {\n      var shouldResetValueBeforeUpDown = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      this.setState(function (state) {\n        var valueBeforeUpDown = state.valueBeforeUpDown;\n\n\n        return {\n          highlightedSectionIndex: null,\n          highlightedSuggestionIndex: null,\n          valueBeforeUpDown: shouldResetValueBeforeUpDown ? null : valueBeforeUpDown\n        };\n      });\n    }\n  }, {\n    key: 'revealSuggestions',\n    value: function revealSuggestions() {\n      this.setState({\n        isCollapsed: false\n      });\n    }\n  }, {\n    key: 'closeSuggestions',\n    value: function closeSuggestions() {\n      this.setState({\n        highlightedSectionIndex: null,\n        highlightedSuggestionIndex: null,\n        valueBeforeUpDown: null,\n        isCollapsed: true\n      });\n    }\n  }, {\n    key: 'getSuggestion',\n    value: function getSuggestion(sectionIndex, suggestionIndex) {\n      var _props = this.props,\n          suggestions = _props.suggestions,\n          multiSection = _props.multiSection,\n          getSectionSuggestions = _props.getSectionSuggestions;\n\n\n      if (multiSection) {\n        return getSectionSuggestions(suggestions[sectionIndex])[suggestionIndex];\n      }\n\n      return suggestions[suggestionIndex];\n    }\n  }, {\n    key: 'getHighlightedSuggestion',\n    value: function getHighlightedSuggestion() {\n      var _state2 = this.state,\n          highlightedSectionIndex = _state2.highlightedSectionIndex,\n          highlightedSuggestionIndex = _state2.highlightedSuggestionIndex;\n\n\n      if (highlightedSuggestionIndex === null) {\n        return null;\n      }\n\n      return this.getSuggestion(highlightedSectionIndex, highlightedSuggestionIndex);\n    }\n  }, {\n    key: 'getSuggestionValueByIndex',\n    value: function getSuggestionValueByIndex(sectionIndex, suggestionIndex) {\n      var getSuggestionValue = this.props.getSuggestionValue;\n\n\n      return getSuggestionValue(this.getSuggestion(sectionIndex, suggestionIndex));\n    }\n  }, {\n    key: 'getSuggestionIndices',\n    value: function getSuggestionIndices(suggestionElement) {\n      var sectionIndex = suggestionElement.getAttribute('data-section-index');\n      var suggestionIndex = suggestionElement.getAttribute('data-suggestion-index');\n\n      return {\n        sectionIndex: typeof sectionIndex === 'string' ? parseInt(sectionIndex, 10) : null,\n        suggestionIndex: parseInt(suggestionIndex, 10)\n      };\n    }\n  }, {\n    key: 'findSuggestionElement',\n    value: function findSuggestionElement(startNode) {\n      var node = startNode;\n\n      do {\n        if (node.getAttribute('data-suggestion-index') !== null) {\n          return node;\n        }\n\n        node = node.parentNode;\n      } while (node !== null);\n\n      console.error('Clicked element:', startNode); // eslint-disable-line no-console\n      throw new Error(\"Couldn't find suggestion element\");\n    }\n  }, {\n    key: 'maybeCallOnChange',\n    value: function maybeCallOnChange(event, newValue, method) {\n      var _props$inputProps = this.props.inputProps,\n          value = _props$inputProps.value,\n          onChange = _props$inputProps.onChange;\n\n\n      if (newValue !== value) {\n        onChange(event, { newValue: newValue, method: method });\n      }\n    }\n  }, {\n    key: 'willRenderSuggestions',\n    value: function willRenderSuggestions(props) {\n      var suggestions = props.suggestions,\n          inputProps = props.inputProps,\n          shouldRenderSuggestions = props.shouldRenderSuggestions;\n      var value = inputProps.value;\n\n\n      return suggestions.length > 0 && shouldRenderSuggestions(value);\n    }\n  }, {\n    key: 'getQuery',\n    value: function getQuery() {\n      var inputProps = this.props.inputProps;\n      var value = inputProps.value;\n      var valueBeforeUpDown = this.state.valueBeforeUpDown;\n\n\n      return (valueBeforeUpDown || value).trim();\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props2 = this.props,\n          suggestions = _props2.suggestions,\n          renderInputComponent = _props2.renderInputComponent,\n          onSuggestionsFetchRequested = _props2.onSuggestionsFetchRequested,\n          renderSuggestion = _props2.renderSuggestion,\n          inputProps = _props2.inputProps,\n          multiSection = _props2.multiSection,\n          renderSectionTitle = _props2.renderSectionTitle,\n          id = _props2.id,\n          getSectionSuggestions = _props2.getSectionSuggestions,\n          theme = _props2.theme,\n          getSuggestionValue = _props2.getSuggestionValue,\n          alwaysRenderSuggestions = _props2.alwaysRenderSuggestions;\n      var _state3 = this.state,\n          isFocused = _state3.isFocused,\n          isCollapsed = _state3.isCollapsed,\n          highlightedSectionIndex = _state3.highlightedSectionIndex,\n          highlightedSuggestionIndex = _state3.highlightedSuggestionIndex,\n          valueBeforeUpDown = _state3.valueBeforeUpDown;\n\n      var shouldRenderSuggestions = alwaysRenderSuggestions ? alwaysTrue : this.props.shouldRenderSuggestions;\n      var value = inputProps.value,\n          _onFocus = inputProps.onFocus,\n          _onKeyDown = inputProps.onKeyDown;\n\n      var willRenderSuggestions = this.willRenderSuggestions(this.props);\n      var isOpen = alwaysRenderSuggestions || isFocused && !isCollapsed && willRenderSuggestions;\n      var items = isOpen ? suggestions : [];\n      var autowhateverInputProps = _extends({}, inputProps, {\n        onFocus: function onFocus(event) {\n          if (!_this2.justSelectedSuggestion && !_this2.justClickedOnSuggestionsContainer) {\n            var shouldRender = shouldRenderSuggestions(value);\n\n            _this2.setState({\n              isFocused: true,\n              isCollapsed: !shouldRender\n            });\n\n            _onFocus && _onFocus(event);\n\n            if (shouldRender) {\n              onSuggestionsFetchRequested({ value: value, reason: 'input-focused' });\n            }\n          }\n        },\n        onBlur: function onBlur(event) {\n          if (_this2.justClickedOnSuggestionsContainer) {\n            _this2.input.focus();\n            return;\n          }\n\n          _this2.blurEvent = event;\n\n          if (!_this2.justSelectedSuggestion) {\n            _this2.onBlur();\n            _this2.onSuggestionsClearRequested();\n          }\n        },\n        onChange: function onChange(event) {\n          var value = event.target.value;\n\n          var shouldRender = shouldRenderSuggestions(value);\n\n          _this2.maybeCallOnChange(event, value, 'type');\n\n          _this2.setState({\n            highlightedSectionIndex: null,\n            highlightedSuggestionIndex: null,\n            valueBeforeUpDown: null,\n            isCollapsed: !shouldRender\n          });\n\n          if (shouldRender) {\n            onSuggestionsFetchRequested({ value: value, reason: 'input-changed' });\n          } else {\n            _this2.onSuggestionsClearRequested();\n          }\n        },\n        onKeyDown: function onKeyDown(event, data) {\n          var keyCode = event.keyCode;\n\n\n          switch (keyCode) {\n            case 40: // ArrowDown\n            case 38:\n              // ArrowUp\n              if (isCollapsed) {\n                if (shouldRenderSuggestions(value)) {\n                  onSuggestionsFetchRequested({\n                    value: value,\n                    reason: 'suggestions-revealed'\n                  });\n                  _this2.revealSuggestions();\n                }\n              } else if (suggestions.length > 0) {\n                var newHighlightedSectionIndex = data.newHighlightedSectionIndex,\n                    newHighlightedItemIndex = data.newHighlightedItemIndex;\n\n\n                var newValue = void 0;\n\n                if (newHighlightedItemIndex === null) {\n                  // valueBeforeUpDown can be null if, for example, user\n                  // hovers on the first suggestion and then pressed Up.\n                  // If that happens, use the original input value.\n                  newValue = valueBeforeUpDown === null ? value : valueBeforeUpDown;\n                } else {\n                  newValue = _this2.getSuggestionValueByIndex(newHighlightedSectionIndex, newHighlightedItemIndex);\n                }\n\n                _this2.updateHighlightedSuggestion(newHighlightedSectionIndex, newHighlightedItemIndex, value);\n                _this2.maybeCallOnChange(event, newValue, keyCode === 40 ? 'down' : 'up');\n              }\n\n              event.preventDefault(); // Prevents the cursor from moving\n\n              _this2.justPressedUpDown = true;\n\n              setTimeout(function () {\n                _this2.justPressedUpDown = false;\n              });\n\n              break;\n\n            // Enter\n            case 13:\n              {\n                // See #388\n                if (event.keyCode === 229) {\n                  break;\n                }\n\n                var highlightedSuggestion = _this2.getHighlightedSuggestion();\n\n                if (isOpen && !alwaysRenderSuggestions) {\n                  _this2.closeSuggestions();\n                }\n\n                if (highlightedSuggestion !== null) {\n                  var _newValue = getSuggestionValue(highlightedSuggestion);\n\n                  _this2.maybeCallOnChange(event, _newValue, 'enter');\n\n                  _this2.onSuggestionSelected(event, {\n                    suggestion: highlightedSuggestion,\n                    suggestionValue: _newValue,\n                    suggestionIndex: highlightedSuggestionIndex,\n                    sectionIndex: highlightedSectionIndex,\n                    method: 'enter'\n                  });\n\n                  _this2.justSelectedSuggestion = true;\n\n                  setTimeout(function () {\n                    _this2.justSelectedSuggestion = false;\n                  });\n                }\n\n                break;\n              }\n\n            // Escape\n            case 27:\n              {\n                if (isOpen) {\n                  // If input.type === 'search', the browser clears the input\n                  // when Escape is pressed. We want to disable this default\n                  // behaviour so that, when suggestions are shown, we just hide\n                  // them, without clearing the input.\n                  event.preventDefault();\n                }\n\n                var willCloseSuggestions = isOpen && !alwaysRenderSuggestions;\n\n                if (valueBeforeUpDown === null) {\n                  // Didn't interact with Up/Down\n                  if (!willCloseSuggestions) {\n                    var _newValue2 = '';\n\n                    _this2.maybeCallOnChange(event, _newValue2, 'escape');\n\n                    if (shouldRenderSuggestions(_newValue2)) {\n                      onSuggestionsFetchRequested({\n                        value: _newValue2,\n                        reason: 'escape-pressed'\n                      });\n                    } else {\n                      _this2.onSuggestionsClearRequested();\n                    }\n                  }\n                } else {\n                  // Interacted with Up/Down\n                  _this2.maybeCallOnChange(event, valueBeforeUpDown, 'escape');\n                }\n\n                if (willCloseSuggestions) {\n                  _this2.onSuggestionsClearRequested();\n                  _this2.closeSuggestions();\n                } else {\n                  _this2.resetHighlightedSuggestion();\n                }\n\n                break;\n              }\n          }\n\n          _onKeyDown && _onKeyDown(event);\n        }\n      });\n      var renderSuggestionData = {\n        query: this.getQuery()\n      };\n\n      return _react2.default.createElement(_reactAutowhatever2.default, {\n        multiSection: multiSection,\n        items: items,\n        renderInputComponent: renderInputComponent,\n        renderItemsContainer: this.renderSuggestionsContainer,\n        renderItem: renderSuggestion,\n        renderItemData: renderSuggestionData,\n        renderSectionTitle: renderSectionTitle,\n        getSectionItems: getSectionSuggestions,\n        highlightedSectionIndex: highlightedSectionIndex,\n        highlightedItemIndex: highlightedSuggestionIndex,\n        inputProps: autowhateverInputProps,\n        itemProps: this.itemProps,\n        theme: (0, _theme.mapToAutowhateverTheme)(theme),\n        id: id,\n        ref: this.storeAutowhateverRef\n      });\n    }\n  }]);\n\n  return Autosuggest;\n}(_react.Component);\n\nAutosuggest.propTypes = {\n  suggestions: _propTypes2.default.array.isRequired,\n  onSuggestionsFetchRequested: function onSuggestionsFetchRequested(props, propName) {\n    var onSuggestionsFetchRequested = props[propName];\n\n    if (typeof onSuggestionsFetchRequested !== 'function') {\n      throw new Error(\"'onSuggestionsFetchRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsFetchRequestedProp\");\n    }\n  },\n  onSuggestionsClearRequested: function onSuggestionsClearRequested(props, propName) {\n    var onSuggestionsClearRequested = props[propName];\n\n    if (props.alwaysRenderSuggestions === false && typeof onSuggestionsClearRequested !== 'function') {\n      throw new Error(\"'onSuggestionsClearRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsClearRequestedProp\");\n    }\n  },\n  onSuggestionSelected: _propTypes2.default.func,\n  onSuggestionHighlighted: _propTypes2.default.func,\n  renderInputComponent: _propTypes2.default.func,\n  renderSuggestionsContainer: _propTypes2.default.func,\n  getSuggestionValue: _propTypes2.default.func.isRequired,\n  renderSuggestion: _propTypes2.default.func.isRequired,\n  inputProps: function inputProps(props, propName) {\n    var inputProps = props[propName];\n\n    if (!inputProps.hasOwnProperty('value')) {\n      throw new Error(\"'inputProps' must have 'value'.\");\n    }\n\n    if (!inputProps.hasOwnProperty('onChange')) {\n      throw new Error(\"'inputProps' must have 'onChange'.\");\n    }\n  },\n  shouldRenderSuggestions: _propTypes2.default.func,\n  alwaysRenderSuggestions: _propTypes2.default.bool,\n  multiSection: _propTypes2.default.bool,\n  renderSectionTitle: function renderSectionTitle(props, propName) {\n    var renderSectionTitle = props[propName];\n\n    if (props.multiSection === true && typeof renderSectionTitle !== 'function') {\n      throw new Error(\"'renderSectionTitle' must be implemented. See: https://github.com/moroshko/react-autosuggest#renderSectionTitleProp\");\n    }\n  },\n  getSectionSuggestions: function getSectionSuggestions(props, propName) {\n    var getSectionSuggestions = props[propName];\n\n    if (props.multiSection === true && typeof getSectionSuggestions !== 'function') {\n      throw new Error(\"'getSectionSuggestions' must be implemented. See: https://github.com/moroshko/react-autosuggest#getSectionSuggestionsProp\");\n    }\n  },\n  focusInputOnSuggestionClick: _propTypes2.default.bool,\n  highlightFirstSuggestion: _propTypes2.default.bool,\n  theme: _propTypes2.default.object,\n  id: _propTypes2.default.string\n};\nAutosuggest.defaultProps = {\n  renderSuggestionsContainer: defaultRenderSuggestionsContainer,\n  shouldRenderSuggestions: defaultShouldRenderSuggestions,\n  alwaysRenderSuggestions: false,\n  multiSection: false,\n  focusInputOnSuggestionClick: true,\n  highlightFirstSuggestion: false,\n  theme: _theme.defaultTheme,\n  id: '1'\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.onDocumentMouseDown = function (event) {\n    _this3.justClickedOnSuggestionsContainer = false;\n\n    var node = event.detail && event.detail.target || // This is for testing only. Please show me a better way to emulate this.\n    event.target;\n\n    while (node !== null && node !== document) {\n      if (node.getAttribute('data-suggestion-index') !== null) {\n        // Suggestion was clicked\n        return;\n      }\n\n      if (node === _this3.suggestionsContainer) {\n        // Something else inside suggestions container was clicked\n        _this3.justClickedOnSuggestionsContainer = true;\n        return;\n      }\n\n      node = node.parentNode;\n    }\n  };\n\n  this.storeAutowhateverRef = function (autowhatever) {\n    if (autowhatever !== null) {\n      _this3.autowhatever = autowhatever;\n    }\n  };\n\n  this.onSuggestionMouseEnter = function (event, _ref3) {\n    var sectionIndex = _ref3.sectionIndex,\n        itemIndex = _ref3.itemIndex;\n\n    _this3.updateHighlightedSuggestion(sectionIndex, itemIndex);\n  };\n\n  this.highlightFirstSuggestion = function () {\n    _this3.updateHighlightedSuggestion(_this3.props.multiSection ? 0 : null, 0);\n  };\n\n  this.onSuggestionMouseDown = function () {\n    _this3.justSelectedSuggestion = true;\n  };\n\n  this.onSuggestionsClearRequested = function () {\n    var onSuggestionsClearRequested = _this3.props.onSuggestionsClearRequested;\n\n\n    onSuggestionsClearRequested && onSuggestionsClearRequested();\n  };\n\n  this.onSuggestionSelected = function (event, data) {\n    var _props3 = _this3.props,\n        alwaysRenderSuggestions = _props3.alwaysRenderSuggestions,\n        onSuggestionSelected = _props3.onSuggestionSelected,\n        onSuggestionsFetchRequested = _props3.onSuggestionsFetchRequested;\n\n\n    onSuggestionSelected && onSuggestionSelected(event, data);\n\n    if (alwaysRenderSuggestions) {\n      onSuggestionsFetchRequested({\n        value: data.suggestionValue,\n        reason: 'suggestion-selected'\n      });\n    } else {\n      _this3.onSuggestionsClearRequested();\n    }\n\n    _this3.resetHighlightedSuggestion();\n  };\n\n  this.onSuggestionClick = function (event) {\n    var _props4 = _this3.props,\n        alwaysRenderSuggestions = _props4.alwaysRenderSuggestions,\n        focusInputOnSuggestionClick = _props4.focusInputOnSuggestionClick;\n\n    var _getSuggestionIndices = _this3.getSuggestionIndices(_this3.findSuggestionElement(event.target)),\n        sectionIndex = _getSuggestionIndices.sectionIndex,\n        suggestionIndex = _getSuggestionIndices.suggestionIndex;\n\n    var clickedSuggestion = _this3.getSuggestion(sectionIndex, suggestionIndex);\n    var clickedSuggestionValue = _this3.props.getSuggestionValue(clickedSuggestion);\n\n    _this3.maybeCallOnChange(event, clickedSuggestionValue, 'click');\n    _this3.onSuggestionSelected(event, {\n      suggestion: clickedSuggestion,\n      suggestionValue: clickedSuggestionValue,\n      suggestionIndex: suggestionIndex,\n      sectionIndex: sectionIndex,\n      method: 'click'\n    });\n\n    if (!alwaysRenderSuggestions) {\n      _this3.closeSuggestions();\n    }\n\n    if (focusInputOnSuggestionClick === true) {\n      _this3.input.focus();\n    } else {\n      _this3.onBlur();\n    }\n\n    setTimeout(function () {\n      _this3.justSelectedSuggestion = false;\n    });\n  };\n\n  this.onBlur = function () {\n    var _props5 = _this3.props,\n        inputProps = _props5.inputProps,\n        shouldRenderSuggestions = _props5.shouldRenderSuggestions;\n    var value = inputProps.value,\n        onBlur = inputProps.onBlur;\n\n    var highlightedSuggestion = _this3.getHighlightedSuggestion();\n    var shouldRender = shouldRenderSuggestions(value);\n\n    _this3.setState({\n      isFocused: false,\n      highlightedSectionIndex: null,\n      highlightedSuggestionIndex: null,\n      valueBeforeUpDown: null,\n      isCollapsed: !shouldRender\n    });\n\n    onBlur && onBlur(_this3.blurEvent, { highlightedSuggestion: highlightedSuggestion });\n  };\n\n  this.resetHighlightedSuggestionOnMouseLeave = function () {\n    _this3.resetHighlightedSuggestion(false); // shouldResetValueBeforeUpDown\n  };\n\n  this.itemProps = function (_ref4) {\n    var sectionIndex = _ref4.sectionIndex,\n        itemIndex = _ref4.itemIndex;\n\n    return {\n      'data-section-index': sectionIndex,\n      'data-suggestion-index': itemIndex,\n      onMouseEnter: _this3.onSuggestionMouseEnter,\n      onMouseLeave: _this3.resetHighlightedSuggestionOnMouseLeave,\n      onMouseDown: _this3.onSuggestionMouseDown,\n      onTouchStart: _this3.onSuggestionMouseDown, // Because on iOS `onMouseDown` is not triggered\n      onClick: _this3.onSuggestionClick\n    };\n  };\n\n  this.renderSuggestionsContainer = function (_ref5) {\n    var containerProps = _ref5.containerProps,\n        children = _ref5.children;\n    var renderSuggestionsContainer = _this3.props.renderSuggestionsContainer;\n\n\n    return renderSuggestionsContainer({\n      containerProps: containerProps,\n      children: children,\n      query: _this3.getQuery()\n    });\n  };\n};\n\nexports.default = Autosuggest;"]},"metadata":{},"sourceType":"script"}